using System;
using System.Collections;
using System.Runtime.CompilerServices;
using MelonLoader;
using ReMod.Core.Managers;
using ReMod.Core.UI.QuickMenu;
using UnityEngine;
using VRC.SDKBase;
using VRC.Udon;

namespace Exploits
{
	// Token: 0x02000032 RID: 50
	[NullableContext(1)]
	[Nullable(0)]
	internal class JustB3FunnyShit
	{
		// Token: 0x060000D8 RID: 216 RVA: 0x000080EA File Offset: 0x000062EA
		public static IEnumerator UnlockRoom(string room)
		{
			float startTime = Time.time;
			while (Time.time < startTime + 0.2f)
			{
				yield return null;
			}
			UdonBehaviour component = GameObject.Find(room).GetComponent<UdonBehaviour>();
			if (component.gameObject != null)
			{
				Networking.SetOwner(VRCPlayer.field_Internal_Static_VRCPlayer_0.field_Private_VRCPlayerApi_0, component.gameObject);
				component.SendCustomEvent("_ResetRoom");
			}
			yield break;
		}

		// Token: 0x060000D9 RID: 217 RVA: 0x000080F9 File Offset: 0x000062F9
		public static IEnumerator SpamRoomSound(string room)
		{
			float startTime = Time.time;
			while (Time.time < startTime + 0.2f)
			{
				yield return null;
			}
			UdonBehaviour ObjectToSendTo = GameObject.Find(room).GetComponent<UdonBehaviour>();
			if (ObjectToSendTo.gameObject != null)
			{
				while (JustB3FunnyShit.SpamSound)
				{
					if (Networking.GetOwner(ObjectToSendTo.gameObject).displayName != Networking.LocalPlayer.displayName)
					{
						Networking.SetOwner(VRCPlayer.field_Internal_Static_VRCPlayer_0.field_Private_VRCPlayerApi_0, ObjectToSendTo.gameObject);
					}
					ObjectToSendTo.SendCustomNetworkEvent(0, "StartIntercom");
					while (Time.time < startTime + 0.5f)
					{
						yield return null;
					}
					startTime = Time.time;
				}
			}
			yield break;
		}

		// Token: 0x060000DA RID: 218 RVA: 0x00008108 File Offset: 0x00006308
		public static void MakeMenu(ref UiManager MainPage)
		{
			ReMenuPage reMenuPage = MainPage.QMMenu.AddMenuPage("JustB3", "JustB3", null, "#ffffff");
			reMenuPage.AddButton("Unlock Summer", "Unlock Summer", delegate
			{
				MelonCoroutines.Start(JustB3FunnyShit.UnlockRoom("Summer"));
			}, null, "#ffffff");
			reMenuPage.AddButton("Unlock Spring", "Unlock Spring", delegate
			{
				MelonCoroutines.Start(JustB3FunnyShit.UnlockRoom("Spring"));
			}, null, "#ffffff");
			reMenuPage.AddButton("Unlock Winter", "Unlock Winter", delegate
			{
				MelonCoroutines.Start(JustB3FunnyShit.UnlockRoom("Winter"));
			}, null, "#ffffff");
			reMenuPage.AddButton("Unlock Autumn", "Unlock Autumn", delegate
			{
				MelonCoroutines.Start(JustB3FunnyShit.UnlockRoom("Autumn"));
			}, null, "#ffffff");
			reMenuPage.AddButton("Unlock VIPBed", "Unlock VIPBed", delegate
			{
				MelonCoroutines.Start(JustB3FunnyShit.UnlockRoom("VIP Bedroom"));
			}, null, "#ffffff");
			reMenuPage.AddSpacer(null);
			reMenuPage.AddSpacer(null);
			reMenuPage.AddSpacer(null);
			reMenuPage.AddButton("Annoy Summer", "Annoy Summer", delegate
			{
				JustB3FunnyShit.SpamSound = true;
				MelonCoroutines.Start(JustB3FunnyShit.SpamRoomSound("Summer"));
			}, null, "#ffffff");
			reMenuPage.AddButton("Annoy Spring", "Annoy Spring", delegate
			{
				JustB3FunnyShit.SpamSound = true;
				MelonCoroutines.Start(JustB3FunnyShit.SpamRoomSound("Spring"));
			}, null, "#ffffff");
			reMenuPage.AddButton("Annoy Winter", "Annoy Winter", delegate
			{
				JustB3FunnyShit.SpamSound = true;
				MelonCoroutines.Start(JustB3FunnyShit.SpamRoomSound("Winter"));
			}, null, "#ffffff");
			reMenuPage.AddButton("Annoy Autumn", "Annoy Autumn", delegate
			{
				JustB3FunnyShit.SpamSound = true;
				MelonCoroutines.Start(JustB3FunnyShit.SpamRoomSound("Autumn"));
			}, null, "#ffffff");
			reMenuPage.AddButton("Annoy VIPBed", "Annoy VIPBed", delegate
			{
				JustB3FunnyShit.SpamSound = true;
				MelonCoroutines.Start(JustB3FunnyShit.SpamRoomSound("VIP Bedroom"));
			}, null, "#ffffff");
			reMenuPage.AddButton("Stop Annoy All", "Stop Annoy All", delegate
			{
				JustB3FunnyShit.SpamSound = false;
			}, null, "#ffffff");
		}

		// Token: 0x040000D0 RID: 208
		public static bool SpamSound;
	}
}
